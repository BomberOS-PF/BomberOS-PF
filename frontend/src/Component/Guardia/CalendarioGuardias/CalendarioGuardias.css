/* Posiciona la tarjeta abajo a la derecha y le da tama√±o fijo */
.cal-mini-card {
  position: fixed;
  right: 16px;
  bottom: 16px;
  width: clamp(360px, 28vw, 560px);
  z-index: 1049;
}

/* Alto fijo para que FullCalendar pueda usar height: 100% */
.cal-mini-card .calendar-mini-wrapper {
  height: 50vh;     /* mitad de la pantalla */
  min-height: 320px;
}

/* Asegura que FullCalendar use todo el alto del wrapper */
.cal-mini-card .fc,
.cal-mini-card .fc .fc-view-harness,
.cal-mini-card .fc .fc-scroller-harness,
.cal-mini-card .fc .fc-scroller {
  height: 100% !important;
}

/* Overlay del d√≠a con guardia (por encima del fondo del daygrid) */
.cal-mini-card td.fc-daygrid-day {
  position: relative;
}
.cal-mini-card .fc .fc-bg-event {
  opacity: 1;
}

/* ===== Tooltip con el MISMO estilo que el componente de Asignar Guardia ===== */
.tooltip-dinamico {
  position: fixed;          /* evita clipping dentro de contenedores */
  display: none;
  pointer-events: none;     /* no captura el mouse */
  white-space: pre;         /* respeta saltos de l√≠nea */
  padding: 6px 8px;
  background: #222;
  color: #fff;
  border-radius: 6px;
  font-size: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, .25);
  z-index: 3000;            /* por encima del calendario */
}

/* Overlay visual para marcar el d√≠a */
/* Valores compartidos con el otro componente */
.cal-mini-card {
  --guard-fill: rgba(240, 128, 128, 0.35); /* #f08080 con transparencia */
  --guard-border: #b30000;
}



/* Contenedor mini: ya lo ten√≠as; aqu√≠ s√≥lo guardo las variables */
.cal-mini-card {
  --guard-fill: rgba(240, 128, 128, 0.35); /* #f08080 con transparencia */
  --guard-border: #b30000;
  --guard-fill-strong: rgba(213, 43, 30, 0.5); /* rojo m√°s fuerte para HOY */
}

/* 1) N√öMEROS DE D√çA EN NEGRO (bootstrap suele pintarlos azul por ser <a>) */
.cal-mini-card .fc a.fc-daygrid-day-number,
.cal-mini-card .fc .fc-daygrid-day-number {
  color: #111 !important;
  text-decoration: none !important;
}

/* Opcional: quitar el subrayado al hover para que no parezca un link azul */
.cal-mini-card .fc a.fc-daygrid-day-number:hover {
  text-decoration: none !important;
}

/* 2) No dejar que el resaltado default de "hoy" tape nuestro overlay */
.cal-mini-card .fc .fc-daygrid-day.fc-day-today .fc-daygrid-day-frame {
  background: transparent !important;
}

/* 3) Overlay del d√≠a con guardia */
.fc-guard-overlay {
  position: absolute;
  inset: 2px;
  background: rgba(240,128,128,0.35); /* mismo BG que ven√≠as usando */
  border: 1px solid #b30000;
  border-radius: 6px;
  pointer-events: none;

  /* üëá centrado perfecto del contenido dentro del casillero */
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 4) Si adem√°s es HOY, usar rojo m√°s fuerte */
.fc-guard-overlay.is-today {
  background: rgba(240, 64, 64, 0.45);
  border-color: #b30000;
  box-shadow: 0 0 0 2px #b30000 inset;
}

/* Hoy con guardia: m√°s intenso */
.cal-mini-card td.fc-daygrid-day .fc-guard-overlay.is-today {
  background: rgba(213, 43, 30, 0.55); /* m√°s oscuro que BG_FILL */
  border-color: #b30000;
}

/* N√∫meros de d√≠a en negro (ya lo ten√≠as) */
.cal-mini-card .fc-daygrid-day-number {
  color: #111 !important;
}

/* Hoy con guardia: m√°s intenso */
.cal-mini-card td.fc-daygrid-day .fc-guard-overlay.is-today {
  background: rgba(213, 43, 30, 0.55);
  border-color: #b30000;
}

/* Badge ‚Äú¬°Hoy Guardia!‚Äù dentro del casillero */
.cal-mini-card td.fc-daygrid-day .fc-guard-overlay .hoy-guardia-badge {
  position: absolute;
  left: 6px;
  bottom: 6px;              /* abajo-izquierda para no tapar el n√∫mero del d√≠a */
  font-weight: 700;         /* negrita */
  font-size: 12px;
  color: #b30000;
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(179, 0, 0, 0.35);
  border-radius: 6px;
  padding: 2px 6px;
  pointer-events: none;     /* para no interferir con el hover del tooltip */
  box-shadow: 0 1px 3px rgba(0,0,0,.15);
}

.fc-guard-overlay.is-today::after {
  content: "¬°Hoy Guardia!";
  font-weight: 700;
  font-size: 12px;
  color: #b30000;

  /* (opcional) mejora de legibilidad sobre el fondo */
  padding: 2px 6px;
  border-radius: 4px;
  background: rgba(255,255,255,0.8);
}

/* ===== Ajustes m√≥viles: 412 x 915 (y similares) ===== */
@media (max-width: 430px) {
  .cal-mini-card {
    max-width: 100%;
    margin: 8px auto;
  }

  /* Compactar paddings para ganar alto √∫til */
  .cal-mini-card .card-body {
    padding: 8px 8px 10px;
  }

  /* Darle mucho m√°s alto al calendario en pantallas altas y estrechas */
  .calendar-mini-wrapper {
    height: 82vh !important; /* prob√° 86‚Äì90vh si a√∫n no entra todo */
  }

  /* Compactar la barra de navegaci√≥n del calendario */
  .fc .fc-toolbar.fc-header-toolbar {
    margin: 0 0 6px;
    padding: 0;
  }
  .fc .fc-toolbar-title {
    font-size: 1rem;
    line-height: 1.1;
  }
  .fc .fc-button {
    padding: 2px 6px;
    font-size: .75rem;
  }

  /* Celdas m√°s eficientes en vertical */
  .fc .fc-daygrid-day-frame {
    padding: 2px;
  }
  .fc .fc-daygrid-day-number {
    padding: 2px;
    font-size: .85rem; /* mantiene legible y ahorra alto */
  }

  /* Badge ‚Äú¬°Hoy Guardia!‚Äù un poco m√°s chico en m√≥vil */
  .franja-hoy-guardia {
    font-size: 11px;
    padding: 2px 4px;
  }
}

/* En m√≥viles con MUCHA altura (p.ej. 412√ó915+), podemos usar m√°s vh */
@media (max-width: 430px) and (min-height: 800px) {
  .calendar-mini-wrapper { height: 86vh !important; }
}

/* Seguridad para zonas con notch */
@supports (height: env(safe-area-inset-top)) {
  @media (max-width: 430px) {
    .calendar-mini-wrapper {
      height: calc(84vh - env(safe-area-inset-top) - env(safe-area-inset-bottom)) !important;
    }
  }
}

/* ===== Evitar que los botones se junten (m√≥vil) ===== */
@media (max-width: 430px) {
  /* Permite que la toolbar salte de l√≠nea y tenga separaci√≥n vertical */
  .fc .fc-toolbar.fc-header-toolbar {
    flex-wrap: wrap;
    row-gap: 6px;
  }

  /* Espacio entre el grupo (prev/next) y el bot√≥n "hoy" */
  .fc .fc-toolbar-chunk {
    display: flex;
    align-items: center;
    gap: 8px; /* separa el grupo prev/next del bot√≥n "hoy" */
  }

  /* Dentro del grupo prev/next, separa los botones */
  .fc .fc-button-group {
    display: flex;
    gap: 6px;            /* forma moderna */
  }
  /* Fallback por si gap no aplica en tu build */
  .fc .fc-button-group .fc-button + .fc-button {
    margin-left: 6px;
  }

  /* Tama√±o m√≠nimo/tappable sin que se peguen visualmente */
  .fc .fc-button {
    margin: 0 !important;   /* evita m√°rgenes raros del tema */
    padding: 4px 8px;
    font-size: .8rem;
    min-width: 36px;
    line-height: 1.2;
  }

  /* El "hoy" no necesita margen; el gap ya lo separa */
  .fc .fc-today-button {
    margin-left: 0 !important;
  }
}

/* ====== CARD DEL PADRE (no flotante) ====== */
.cal-page-card {
  position: static;   /* evita el fixed del mini */
  right: auto;
  bottom: auto;
  width: 100%;
  max-width: 100%;
  z-index: auto;
}

.cal-page-card .card-header {
  position: relative;
  z-index: 2;
  overflow: visible;  /* por si alg√∫n style ocultaba el grupo de botones */
}

/* Botonera del header: que no colapse y tenga separaci√≥n */
.cal-page-card .card-header .btn-group {
  display: flex;
  gap: .5rem;
}

/* Contraste de botones outline sobre bg-danger */
.cal-page-card .card-header .btn.btn-outline-light {
  border-color: rgba(255,255,255,.6);
  color: #fff;
}

/* En pantallas chicas, permit√≠ wrap sin que se pierdan botones */
@media (max-width: 576px) {
  .cal-page-card .card-header {
    row-gap: .5rem;
  }
  .cal-page-card .card-header .btn-group .btn {
    padding: .25rem .5rem;
    font-size: .825rem;
  }
}
